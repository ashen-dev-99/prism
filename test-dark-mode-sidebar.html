<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dark Mode Sidebar Test</title>
    <link rel="stylesheet" href="dist/prism-theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .test-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #000;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            z-index: 9999;
            font-size: 12px;
        }
        .test-controls {
            margin: 20px 0;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 8px;
        }
        .test-controls button {
            margin: 5px;
            padding: 8px 16px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .test-controls button:hover {
            background: #4f46e5;
        }
        .theme-toggle {
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 10000;
            padding: 10px;
            background: #6366f1;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .theme-toggle:hover {
            background: #4f46e5;
        }
        [data-theme="dark"] .test-controls {
            background: #374151;
            color: #f9fafb;
        }
        [data-theme="dark"] .test-info {
            background: #1f2937;
            color: #f9fafb;
        }
    </style>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()">
        <i class="fas fa-moon" id="theme-icon"></i> Toggle Theme
    </button>

    <div class="test-info">
        <div>Theme: <span id="current-theme">light</span></div>
        <div>Sidebar: <span id="sidebar-state">expanded</span></div>
        <div>Button Visible: <span id="button-visible">yes</span></div>
        <div>Screen: <span id="screen-size">loading...</span></div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-brand">
            <div class="header-brand-logo">
                <i class="fas fa-cube"></i>
            </div>
            <span class="header-brand-text">Prism Admin</span>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" data-component="sidebar">
        <nav class="sidebar-nav">
            <div class="sidebar-nav-section">
                <h6 class="sidebar-nav-section-title">Main</h6>
                <ul class="sidebar-nav-list">
                    <li class="sidebar-nav-item">
                        <a href="#" class="sidebar-nav-link active">
                            <i class="fas fa-home nav-icon"></i>
                            <span class="nav-text">Dashboard</span>
                        </a>
                    </li>
                    <li class="sidebar-nav-item">
                        <a href="#" class="sidebar-nav-link">
                            <i class="fas fa-users nav-icon"></i>
                            <span class="nav-text">Users</span>
                            <span class="nav-badge">12</span>
                        </a>
                    </li>
                    <li class="sidebar-nav-item">
                        <a href="#" class="sidebar-nav-link">
                            <i class="fas fa-shopping-cart nav-icon"></i>
                            <span class="nav-text">Orders</span>
                        </a>
                    </li>
                </ul>
            </div>
        </nav>
    </aside>

    <!-- Sidebar Toggle -->
    <button class="sidebar-toggle" data-sidebar-toggle data-tooltip="Toggle Sidebar">
        <i class="fas fa-chevron-left sidebar-toggle-icon"></i>
    </button>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay"></div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="main-content-wrapper">
            <h1>Dark Mode Sidebar Test</h1>
            
            <div class="test-controls">
                <h3>Test Controls</h3>
                <button onclick="window.sidebar.toggle()">Toggle Sidebar</button>
                <button onclick="window.sidebar.minimize()">Minimize (Mobile)</button>
                <button onclick="window.sidebar.maximize()">Maximize (Mobile)</button>
                <button onclick="localStorage.clear(); location.reload();">Reset</button>
            </div>
            
            <h3>Dark Mode Testing:</h3>
            <ul>
                <li><strong>Toggle Button:</strong> Should have proper dark colors</li>
                <li><strong>Hover Effects:</strong> Should work in both themes</li>
                <li><strong>Focus States:</strong> Should be visible in dark mode</li>
                <li><strong>Mobile States:</strong> Should work in both themes</li>
                <li><strong>Transitions:</strong> Should be smooth in both themes</li>
            </ul>
            
            <h3>Test Instructions:</h3>
            <ol>
                <li>Click "Toggle Theme" to switch between light and dark modes</li>
                <li>Test sidebar toggle button in both themes</li>
                <li>Resize browser to test mobile behavior in both themes</li>
                <li>Check hover and focus states in both themes</li>
                <li>Verify button positioning and visibility</li>
            </ol>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-wrapper">
            <div class="footer-bottom">
                <p class="footer-bottom-text">&copy; 2024 Prism Theme. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script type="module" src="src/index.js"></script>
    <script>
        // Theme toggle functionality
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update theme icon
            const icon = document.getElementById('theme-icon');
            icon.className = newTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            
            updateDisplay();
        }
        
        // Test script to monitor dark mode behavior
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.querySelector('.sidebar');
            const button = document.querySelector('.sidebar-toggle');
            const themeSpan = document.getElementById('current-theme');
            const stateSpan = document.getElementById('sidebar-state');
            const buttonSpan = document.getElementById('button-visible');
            const screenSpan = document.getElementById('screen-size');

            function updateDisplay() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const isCollapsed = sidebar.classList.contains('sidebar--collapsed');
                const isShowing = sidebar.classList.contains('show');
                const buttonVisible = window.getComputedStyle(button).display !== 'none';
                const width = window.innerWidth;
                
                themeSpan.textContent = currentTheme;
                stateSpan.textContent = isCollapsed ? 'collapsed' : 'expanded';
                buttonSpan.textContent = buttonVisible ? 'yes' : 'no';
                screenSpan.textContent = `${width}px`;
            }

            // Monitor changes
            const observer = new MutationObserver(updateDisplay);
            observer.observe(sidebar, { attributes: true, attributeFilter: ['class'] });
            observer.observe(document.documentElement, { attributes: true, attributeFilter: ['data-theme'] });
            observer.observe(button, { attributes: true, attributeFilter: ['style'] });

            // Load saved theme
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            const icon = document.getElementById('theme-icon');
            icon.className = savedTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';

            // Initial display
            updateDisplay();
            
            // Update on resize
            window.addEventListener('resize', updateDisplay);
            
            console.log('Dark mode sidebar test loaded');
            console.log('Sidebar instance:', window.sidebar);
        });
    </script>
</body>
</html>
